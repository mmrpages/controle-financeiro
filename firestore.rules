// REGRAS DE SEGURANÇA DO FIRESTORE
// Cole isto no Firebase Console > Firestore Database > Rules

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Regra para coleção de usuários
    match /usuarios/{userId} {
      // Permite leitura e escrita apenas para o próprio usuário autenticado
      allow read, write: if request.auth != null && request.auth.uid == userId;
      
      // Validações adicionais nos dados
      allow write: if request.auth != null 
                   && request.auth.uid == userId
                   && request.resource.data.categories is list
                   && request.resource.data.data is list
                   && request.resource.data.presets is list;
    }
    
    // Bloqueia acesso a qualquer outra coleção
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

// INSTRUÇÕES:
// 1. Copie todo este conteúdo (exceto estas instruções)
// 2. Acesse: https://console.firebase.google.com/
// 3. Selecione seu projeto: mmrpages-controle-financeiro
// 4. No menu lateral, clique em "Firestore Database"
// 5. Clique na aba "Rules" (Regras)
// 6. Cole as regras acima
// 7. Clique em "Publicar" (Publish)

// IMPORTANTE:
// Estas regras garantem que:
// ✅ Apenas usuários autenticados podem acessar dados
// ✅ Cada usuário só pode ver/editar seus próprios dados
// ✅ Dados são validados antes de serem salvos
// ✅ Ninguém pode acessar dados de outros usuários
// ✅ Todas as outras coleções são bloqueadas por padrão
